extends ../layout

block scripts
  script(src="/public/scripts/index.js") 
  include ../comps/geoDataInit.pug
  script(src="/public/scripts/mapLibreGL.js" defer)

block content
  h1.heading.is-size-1 Review-it
  h2.heading.is-size-6 A place to get reviews on anything that matters! (or not!)
  <div id='map' style='width: 100%; height: 300px;'></div>
  .columns.my-5.is-multiline.is-3
    each post in posts
      .column.is-one-third
        div(class="card")
          a(href='/posts/'+post.id)
            div(class="card-image") 
              figure(class="image is-4by3")
                img(style="object-fit: cover" src=`${post.images && post.images[0] ? post.images[0].url: '/public/no-image.png'}`, alt=post.title+"image")
            div(class="card-content") 
              h1=post.title 
          div(class="card-content") 
            p=post.description