extends ../layout

block scripts
  script(src="/public/scripts/index.js") 
  script.
    const data ={ features: !{JSON.stringify(geoData).replace(/<\//g, "<\\/")}} 
    const mapTilerApiKey = '#{mapTilerApiKey}';
  script(src="/public/scripts/mapLibreGL.js" defer)
  
block content
  h1.heading.is-size-1 Review anything!
  <div id='map' style='width: 100%; height: 300px;'></div>
  .columns.is-multiline.is-3
    each post in posts
      .column.is-one-third
        div(class="card")
          a(href='/posts/'+post.id)
            div(class="card-image") 
              figure(class="image is-4by3")
                img(style="object-fit: cover" src=`${post.images && post.images[0] ? post.images[0].url: 'https://res.cloudinary.com/dwz8ueclf/image/upload/v1664168545/kk1t6wh2dutx4vnuqsje.png'}`, alt=post.title+"image")
            div(class="card-content") 
              h1=post.title 
          div(class="content")   
            p=post.description